[Q]: Установка Process Commander на Warp4/FP12

[A]: Denis Zavorotny (2:467/28)

Решил сегодня снова, после двух лет перерыва, попробовать поставить Process
Commander, и обнаружил, что его инсталлятор не понимает DOSCALL1.DLL от моего
12-го фикспака - ему не нравится, что в таблице импорта теперь прописаны два
модуля, а не один... Пришлось уговаривать. Для начала, чтобы хуки всё-таки
поставились, перед инсталляцией нужно исправить байт по смещению 0x000000F4 в
имеющейся DOSCALL1.DLL (125384, 27.07.99) - заменить 02 на 01. После того как
отработает PCINSDLL /INSTALL_HOOK, в DOSCALL1.DLL от Process Commander'а
(расположенной в \PC\DLL и в \OS2\PCDLL) делаются следующие изменения:

DOSCALL1.DLL (129739, 01.02.97):
000000F4: 02 03    // - В import table теперь 3 модуля - добавился SESMGR
00001946: 02 03    // - Fixup Rec для SESMGR.37 - указываем что это модуль #3.
000025BD: 49 06    // - То что здесь было раньше похоже просто на мусор,
000025BE: 50 53    //   поэтому мы можем спокойно забить .SESMGR, не испытывая
000025C0: 5C 53    //   затруднений со структурами, расположенными дальше.
000025C1: 4C 4D
000025C2: 4F 47
000025C3: 47 52

Это всё - после этого OS/2 спокойно загружается и работает, Process Commander
вроде тоже. Doscall1.dll из \OS2\PCDLL наверно можно убрать, т.к. копия есть в 
\PC\DLL. За пол-дня работы пока не было ни одного трапа, и popuplog тоже пока
пустой, так что думаю этот патч можно хотя бы попробовать :)

DISCLAIMER: "If its good, I am responsible. If its bad, its all your fault. ;)"
            - by Daniela Engert.
