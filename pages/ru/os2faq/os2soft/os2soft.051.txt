[Q]: BlackOut v 1.0 виснет

[A]: Andrey Mitrofanov (2:5020/198.486)

*Коротко*: Висы и глюки BlackOut'а -- от ненастроенных видео драйверов,
Hа настроенных -- работает как часы.

*Длинно*.
Я несколько раз советовал в этой эхе разным людям программу BlackOut 1.0,
как меаленький и простой, без ненужных летающих тостеров и гремящих
виндовсов  :)  скринсейвер для OS/2.
Многие (и в этой эхе) рекомендуют его же.  :)

Hа одно из таких писем я получил следующий ответ:

 Q> Этот паразит из FS не умеет гасить экран, только переключается в PM и всё.
 Q> Да и вообще, из 10 раз один раз срабатывает... Зато ручник хорошо работает,
 Q> да так, что вывести моник из спячки никак нельзя уже потом...

Тогда я принял это к сведению - может и не работать [где-то? у кого-то? :)].

Hедавно переставлял ось (поставил Warp4 -- уже три года [почти:)] прошло,
порабы и посмотреть :)) -- на отдельный раздел, конечно) и поимел
аналогичные проблемы с BlackOut'ом.

0) О себе:  :)
  - железо P133/32/ATI Mach64 PCI [что-то типа ?264CT]
  - full screen сессиями практически не пользуюсь (fc/vc и в окошке бегают:)

1) Итак, имеем:
1a) Warp3/8.234+драйвера 2.22+BlackOut
   -- работает включает, выключает, многократно, без сбоев
1б) Warp4/fix0+драйвера 3.1+BlackOut
   -- :((( Гасим экран первый раз - гаснет. Жмем на капу - включается.
      Гасим _второй_ раз - имеем вис всего и вся с PMSHELL.EXE в
      popuplog.os2:
===8<===
07-09-1999  17:54:05  SYS3175  PID 0005  TID 000d  Slot 0023
>C:\OS2\PMSHELL.EXE
c0000005
00c51794
[...регистры skipped...]

>ATI0.SYS
===>8===
  " :(  Ой! А ведь говорил же мне добрый человек, что BO - глюк!.."

2) _Обнаруженная проблема и ее устранение_:
Проходя мимо C:\os2\ обнаружил в нем -
===8<=== "svgadata.err"
VSVGA: Error at line:  129, column:   12, No port list entry for port
VSVGA: Error at line:  130, column:   12, No port list entry for port
VSVGA: Error at line:  237, column:   19, No port list entry for port
===>8===
Ага!.. А не оно ли это? :))
Указанные строки в svgadata.pmi имели вид:
  129:   outw(0x82ec, 0xffff);
  130:   outw(0x82ee, 0xffff);
  237:   WORD_IOPORT 0x82ec;
[* О, кстати, сейчас заметил - порты те самые, что с COM4 пересекаются --
   учение faq непобедимо и потому верно. В-) *]

Вылечилось _копированием_ svgadata.pmi из работающего Warp3 (см.п.1а)).

3) Откуда же взялся -
--a-      28,661  7-09-99  4:21p SVGADATA.PM0        <-- не работает
--a-      48,103  2-01-97  2:10p SVGADATA.PMI        <-- работает
- SVGADATA.PMI, который не работает и почему второй работает??

Так вот все оказалось просто. (Перечитывайте faq'и на ночь!  Р-) )

Hеработающий получен нажатием кнопочки "Use monitor defaults" (кажется
так) во время установки драйверов на Warp4, а работающий был получен
в соответствии с "/VID10 - Как настpоить pаботу видеокаpты/?" или
"/VID14 - Частота обновления экрана у меня маловата/ (/рефреш/). /Че делать/?"
из OS2FAQS.ZIP (кажется, даже в ДОС перегрузился :) )

Тогда я даже поигрался _разными_ SVGA.EXE - собственным от оси и
пришедшим с драйверами - и выбрал наиболее понравившийся (заработавший? :)
SVGADATA.PMI.
